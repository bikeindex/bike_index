<div class="tw:px-4 tw:max-w-7xl tw:mx-auto tw:mb-6">
  <h1 class="tw:text-3xl tw:text-slate-800 tw:mb-4">Bike Index Marketplace</h1>
  <%= render Search::Form::Component.new(target_search_path: search_marketplace_path,
    target_frame: :marketplace_results_frame, interpreted_params: @interpreted_params,
    currency: @currency, marketplace_scope: @marketplace_scope, price_min_amount: @price_min_amount,
    price_max_amount: @price_max_amount, result_view: @result_view) %>
</div>

<div data-controller="infinite-scroll">
  <%= turbo_frame_tag :marketplace_results_frame do %>
    <% if @render_results %>
      <div id="marketplace_results_list">
        <%= render partial: "results_content" %>
      </div>

      <% if @bikes.present? && @pagy.present? %>
        <div id="pagination" data-infinite-scroll-target="pagination">
          <%= render(Pagination::Component.new(pagy: @pagy, page_params: params,
            size: :lg, data: {turbo_action: "advance", turbo_frame: "marketplace_results_frame"})) %>
        </div>
      <% end %>
    <% else %>
      <span id="loadedWithoutResults" class="tw:hidden"></span>
    <% end %>
  <% end %>
</div>

<div id="hiddenLoadingSpinner" class="tw:hidden">
  <%= render LoadingSpinner::Component.new(text: t(".loading_results")) %>
</div>
