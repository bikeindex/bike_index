<h1 class="mt-4">
  All applications <small class="less-strong"> (admin list) </small>
</h1>

<h3 class="header-font-uncap">
  <%= number_with_delimiter(@applications.count) %>
  <%= "application".pluralize(@applications.count) %> created
</h3>

<div class="full-screen-table">
  <table class="table table-striped table-bordered table-sm mt-4">
    <thead>
      <tr>
        <th>
          Created
        </th>

        <th>
          Name
        </th>

        <th>
          User
        </th>

        <th>
          Callback URLs
        </th>

        <th><small> Tokens </small></th>
      </tr>
    </thead>

    <tbody>
      <% @applications.each do |application| %>
        <tr id="application_<%= application.id %>">
          <td>
            <a
              class="convertTime"
              href="<%= oauth_application_url(application) %>"
            >
              <%= l application.created_at, format: :convert_time %>
            </a>
          </td>

          <td>
            <div class="less-strong-hold">
              <%= application.name %>

              <% if display_dev_info? %>
                <span class="less-strong-right only-dev-visible">
                  <%= application.id %>
                </span>
              <% end %>
            </div>

            <% if application.can_send_stolen_notifications? %>
              <span class="text-warning">
                Has permission to send stolen notifications
              </span>
            <% end %>
          </td>

          <td>
            <% if application.owner.present? %>
              <%= link_to application.owner.display_name, admin_user_path(application.owner.to_param) %>
            <% else %>
              no owner
            <% end %>
          </td>

          <td style="overflow-x: scroll; max-width: 33vw;">
            <pre class="small mb-2"><%= application.redirect_uri.gsub(/\s+/, "\n") %></pre>
          </td>

          <td><%= application.access_tokens.count %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<script>
  $(document).ready(function() {
    $(".doorkeeper-container").addClass("container-fluid").removeClass("doorkeeper-container");
  });
</script>
