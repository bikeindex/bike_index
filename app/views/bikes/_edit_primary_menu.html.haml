- no_save_button ||= false
- purchase_plan_button ||= false

%nav.primary-edit-form-well-menu{class: (no_save_button ? "no-save-button" : "")}
  - if @permitted_return_to.present?
    %span#permittedReturnTo{ "data-path" => @permitted_return_to }
  - if @bike.status_stolen?
    %h3.nav-group-header= t("activerecord.edit_primary_menu.theft_information")
    %ul
      - @theft_templates.each do |template, description|
        %li{ class: "edit-menu-#{template}" }
          - is_active = 'active' if @edit_template.match(/#{template}/)
          %a{ href: edit_bike_path(id: @bike.to_param, edit_template: template), class: is_active }
            %h4= description
  - if @bike.status_stolen?
    %h3.nav-group-header
      = t("activerecord.edit_primary_menu.bike_type_information", bike_type: @bike.type)
  %ul
    - @bike_templates.each do |template, description|
      %li{ class: "edit-menu-#{template}" }
        - is_active = 'active' if @edit_template.match(/#{template}/)
        %a{ href: edit_bike_path(id: @bike.to_param, edit_template: template), class: is_active }
          %h4= description

  .form-well-edit-page-select
    -# ignore this select in dirty forms
    %select.dirtyignore
      - @edit_templates.each do |template, description|
        %option{ selected: (@edit_template == template), value: edit_bike_path(id: @bike.to_param, edit_template: template) }
          = description

  .edit-form-well-submit-wrapper
    = hidden_field_tag :edit_template, @edit_template
    - if purchase_plan_button
      = submit_tag t("activerecord.edit_primary_menu.purchase_alert"), class: 'btn btn-lg btn-primary'
    - else
      = submit_tag t("activerecord.edit_primary_menu.save_changes"), class: 'btn btn-lg btn-primary saveBikeChanges'
