.admin-subnav
  .col-12
    %h1
      New Post

#postForm
  = render(UI::AlertForErrors::Component.new(object: @social_post))

  = form_for [:admin, @social_post], url: { action: "create", controller: "social_posts" } do |f|
    .row
      .col-md-6.offset-md-3
        .form-group.mb-4
          = f.label :kind, "Kind"
          = f.select :kind, [["Import post", "imported_post"], ["Send post", "app_post"]], { prompt: "Choose kind", required: true }, class: "form-control"

    .card.bg-light.collapse#kind-app_post{ class: (@social_post.kind == "app_post" ? "show in" : "") }
      .card-body
        .row
          .col-md-6
            .form-group.fancy-select.unfancy
              = f.label :social_account_id do
                Account
                %small.less-strong
                  will send the original post
              = f.collection_select(:social_account_id, SocialAccount.all, :id, :screen_name, { prompt: "Choose  " }, { class: "form-control" })
              .form-group.avatar-upload
                = f.label :image, 'Post photo', class: 'control-label'
                .avatar-img
                  .input-group
                    .custom-file
                    = f.label :image, "Post Image", class: "custom-file-label"
                    = f.file_field :image, class: "custom-file-input", accept: ImageUploader.permitted_extensions.join(",")
          .col-md-6
            .form-group#characterCounterField
              = f.label :body do
                Post
                %small.less-strong
                  Make sure the text is under the character count
              = f.text_area :body, rows: 4, class: "form-control"
              :javascript
                window.maxCharacterCount = #{Integrations::SocialPoster::POST_LENGTH};
              %p.text-info.text-right{ style: "margin-top: -0.4rem; font-size: 150%;" }
                %span#characterTotal

        .form-group
          = f.submit 'Send post!', class: 'btn btn-success'

        .mt-4
          %strong
            Repost:
          %small
            %a.btn.btn-outline-secondary.btn-sm.less-strong.ml-4#checkAll{ href: "#" }
              select all
            %a.btn.btn-outline-secondary.btn-sm.less-strong.ml-4#uncheckAll{ href: "#" }
              unselect
        .row#socialAccountIds.mt-2
          - SocialAccount.active.each do |social_account|
            .form-check
              %label
                = check_box_tag "social_account_ids[]", social_account.id, true, id: "#social_account_ids_#{social_account.id}", multiple: true
                = social_account.screen_name
        %em.small.less-strong
          Even if checked, original account won't repost itself (so feel free to leave it checked)
    .card.bg-light.collapse#kind-imported_post{ class: (@social_post.kind == "imported_post" ? "show in" : "") }
      .card-body
        %p
          %strong Import a post
        %p
          %em
            This is primarily for adding a post to a landing page.
        %p
          Get the post ID from the URL of the post. It's the final number at the end of the url
        %p
          e.g. for <code>https://twitter.com/stolenbikereg/status/874644243737751553</code> - 874644243737751553
        .form-group
          = f.label :platform_id, 'Platform id'
          = f.text_field :platform_id, class: "form-control"

        .mt-4
          = f.submit 'Create post!', class: 'btn btn-success'
