%h1
  New Payment

= form_for [:admin, @payment] do |f|
  - if @payment.errors.any?
    = render partial: "/shared/errors", locals: { name: "Payment", obj: @payment }

  .row
    .col-md-6
      .form-group.fancy-select.unfancy
        = f.label :kind
        = f.select :kind, Payment.admin_creatable_kinds.map { |k| [k.humanize, k] }
    .col-md-6
      .form-group
        - f.object.created_at = TimeParser.round(f.object.created_at || Time.current)
        = f.label :created_at, "Time of payment"
        = f.datetime_local_field :created_at, max: Time.current + 1.week, step: 60, required: true, class: 'form-control'
    .col-md-6
      .form-group
        = f.label :amount
        = f.number_field :amount, step: 1, min: 0, class: "form-control"
    .col-md-6
      .form-group
        = f.label :email, "Email of user who created payment"
        = f.email_field :email, class: "form-control"
    .col-md-6
      - organizations = Organization.all
      .form-group.fancy-select.unfancy
        = f.label :organization_id, class: "control-label"
        = collection_select(:payment, :organization_id, organizations, :id, :name, prompt: "Choose organization")
    .col-md-6.mt-4
      = f.submit "Submit", class: 'btn btn-success float-right'
