- help_link = link_to "gavin@bikeindex.org", "mailto:gavin@bikeindex.org"

%h1.header-font-uncap
  = translate_with_args(".welcome_to_your_ambassador_homepage")

%p= translate_with_args(".this_page_contains_the_resources_you_need")
%p= translate_with_args(".being_a_bike_index_ambassador")
%p= translate_with_args(".activities_for_registering_cyclists_html", help_link: help_link)

- if @suggested_activities.present?
  %h2= translate_with_args(".suggested_activities")
  .full-screen-table
    %table.table.table-striped.table-bordered.ambassador-tasks-table
      %thead.small-header
        %tr
          %th= translate_with_args(".activity")
          %th= translate_with_args(".actions")
      %tbody
        - @suggested_activities.each do |task|
          %tr
            %td
              %strong= task.title
              %br
              = task.description_html.html_safe
            %td.ambassador-toggle
              - if task.is_a?(AmbassadorTaskAssignment)
                = button_to_toggle_task_completion_status(task, current_user, current_organization)

- if @completed_activities.present?
  %h2= translate_with_args(".completed_activities")
  .full-screen-table
    %table.table.table-striped.table-bordered.ambassador-tasks-table
      %thead.small-header
        %tr
          %th= translate_with_args(".activity")
          %th= translate_with_args(".completed")
      %tbody
        - @completed_activities.each do |task|
          %tr
            %td
              %strong= task.title
              %br
              = task.description_html.html_safe
            %td
              %span.convertTime= l task.completed_at, format: :convert_time


%h2= translate_with_args(".leaderboard")
.full-screen-table
  %table.table.table-striped.table-hover.table-bordered.table-sm.without-exterior-border
    %thead.small-header
      %tr
        %th= translate_with_args(".name")
        %th= translate_with_args(".activities")
    %tbody
      - @ambassadors.each do |ambassador|
        %tr
          %td= ambassador.name
          %td= ambassador.progress_count
