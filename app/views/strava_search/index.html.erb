<% content_for(:header) do %>
  <% if ENV["BUILD_STRAVA_SEARCH"] == "true" %>
    <script type="module" src="http://localhost:3143/@vite/client"></script>
    <script type="module" src="http://localhost:3143/src/main.tsx"></script>
  <% else %>
    <% Dir.glob(Rails.root.join("public/strava_search/assets/*")).each do |file| %>
      <% basename = File.basename(file) %>
      <% if basename.end_with?(".js") %>
        <script type="module" crossorigin src="/strava_search/assets/<%= basename %>"></script>
      <% elsif basename.end_with?(".css") %>
        <link rel="stylesheet" crossorigin href="/strava_search/assets/<%= basename %>">
      <% end %>
    <% end %>
  <% end %>
<% end %>

<div id="root"></div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    <%# Update the body padding so that there isn't whitespace at top %>
    document.body.classList.add('tw:pt-[68px]!', 'tw:lg:pt-[85px]!');
    <%# And remove the whitespace at the bottom of the page too %>
    document.querySelector('.primary-footer').style.marginTop = '0';
  });
</script>
