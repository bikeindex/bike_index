!!!
%html
  %head
    = header_tags
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,300italic,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
    = javascript_pack_tag "admin_application"
    = stylesheet_pack_tag "application_css"

  / manually override body_class in a few situations :/
  - body_class = "welcome-page" if current_page?(root_path) and controller_name == "welcome"
  - body_class = "vendor-signup-page" if current_page?(:vendor_signup)
  - body_class = "news-page" if controller_name == "news"
  %body{ id: page_id, class:  body_class }
    %nav.navbar.navbar-expand-md.navbar-light.bg-light
      %span.navbar-brand.admin-nav-logo
        = link_to (image_tag("logo.svg")), admin_root_path
      - if current_user.superuser?
        %button.navbar-toggler{"aria-controls" => "navbarSupportedContent", "aria-expanded" => "false", "aria-label" => "Toggle navigation", "data-target" => "#collapsible-admin-nav", "data-toggle" => "collapse", :type => "button"}
          %span.navbar-toggler-icon
        .collapse.navbar-collapse#collapsible-admin-nav
          %ul.navbar-nav.admin-nav
            %li.nav-item.px-3.btn.btn-default{ class: controller_name == "users" ? "bg-info" : "" }
              = revised_active_link "Users", admin_users_path
            %li.nav-item.px-3.btn.btn-default{ class: controller_name == "bikes" ? "bg-info" : "" }
              = revised_active_link "Bikes", admin_bikes_path
            %li.nav-item.px-3.btn.btn-default{ class: controller_name == "organizations" ? "bg-info" : "" }
              = revised_active_link "Organizations", admin_organizations_path
            %li.nav-item.px-3.btn.btn-default{ class: controller_name == "news" ? "bg-info" : "" }
              = revised_active_link "News", admin_news_index_path
            .dropdown
              %button.btn.btn-default.dropdown-toggle.nav-dropdown{"type" => "button", "data-toggle" => "dropdown"}
                Stolen
              .dropdown-menu.admin-nav-dropdown
                .dropdown-item{ class: controller_name == "stolen_bikes" ? "bg-info" : "" }
                  = revised_active_link "Stolen", admin_stolen_bikes_path
                .dropdown-item{ class: controller_name == "recoveries" ? "bg-info" : "" }
                  = revised_active_link "Recoveries", admin_recoveries_path
                .dropdown-item{ class: controller_name == "recovery_displays" ? "bg-info" : "" }
                  = revised_active_link "Recovery displays", admin_recovery_displays_path
                -# Unsure of what to do with this one since it just directs to root page
                .dropdown-item
                  = revised_active_link 'Stolen Twitterbot URL', ENV['STOLEN_TWITTERBOT_URL'].gsub(/bikes\z/, '')

            .dropdown
              %button.btn.btn-default.dropdown-toggle.nav-dropdown{"type" => "button", "data-toggle" => "dropdown"}
                Paid
              .dropdown-menu.admin-nav-dropdown
                .dropdown-item{ class: controller_name == "payments" ? "bg-info" : "" }
                  = revised_active_link "Payments", admin_payments_path
                .dropdown-item{ class: controller_name == "paid_features" ? "bg-info" : "" }
                  = revised_active_link "Paid Features", admin_paid_features_path
                .dropdown-item{ class: controller_name == "invoices" ? "bg-info" : "" }
                  = revised_active_link "Invoices", admin_invoices_path

            .dropdown
              %button.btn.btn-default.dropdown-toggle.nav-dropdown{"type" => "button", "data-toggle" => "dropdown"}
                Other
              .dropdown-menu.admin-nav-dropdown
                .dropdown-item{ class: controller_name == "memberships" ? "bg-info" : "" }
                  = revised_active_link "Memberships", admin_memberships_path
                .dropdown-item{ class: controller_name == "manufacturers" ? "bg-info" : "" }
                  = revised_active_link "Manufacturers", admin_manufacturers_path
                .dropdown-item{ class: controller_name == "invitations" ? "bg-info" : "" }
                  = revised_active_link "Invitations", admin_invitations_path
                -# Unsure of what to do with this one since it uses the Dashboard Controller
                .dropdown-item
                  = revised_active_link 'TSV Exports', admin_tsvs_url
                -# Same problem as above
                .dropdown-item
                  = revised_active_link 'Maintenance', admin_maintenance_url
                .dropdown-item{ class: controller_name == "failed_bikes" ? "bg-info" : "" }
                  = revised_active_link 'Failed bikes', admin_failed_bikes_url
                .dropdown-item{ class: controller_name == "ctypes" ? "bg-info" : "" }
                  = revised_active_link 'Component types', admin_ctypes_url
                .dropdown-item{ class: controller_name == "graphs" ? "bg-info" : "" }
                  = revised_active_link 'Graphs', admin_graphs_url
                .dropdown-item{ class: controller_name == "paints" ? "bg-info" : "" }
                  = revised_active_link 'Edit paints', admin_paints_url
                .dropdown-item{ class: controller_name == "feedbacks" ? "bg-info" : "" }
                  = revised_active_link 'Feedbacks', admin_feedbacks_url
                .dropdown-item{ class: controller_name == "tweets" ? "bg-info" : "" }
                  = revised_active_link 'Tweets', admin_tweets_url 
                .dropdown-item{ class: controller_name == "bulk_imports" ? "bg-info" : "" }
                  = revised_active_link 'Bulk Imports', admin_bulk_imports_url
            - if Rails.env.development?
              .dropdown
                %button.btn.btn-default.dropdown-toggle.nav-dropdown{"type" => "button", "data-toggle" => "dropdown"}
                  Mailers
                .dropdown-menu.admin-nav-dropdown
                  .dropdown-item
                    = revised_active_link "organized", '/rails/mailers/organized_mailer'
                  .dropdown-item
                    = revised_active_link "admin", '/rails/mailers/admin_mailer'
                  .dropdown-item
                    = revised_active_link "customer", '/rails/mailers/customer_mailer'
          %ul.navbar-nav.ml-auto.admin-nav
            %li.nav-item
              %button.btn.btn-default
                = revised_active_link "Exit Admin", root_path


      - elsif current_user.is_content_admin?
        %span.font-weight-bold
          = revised_active_link "Go hard", admin_news_index_path
        %ul
          %li
            = revised_active_link "News", admin_news_index_path

    = render 'layouts/revised_messages'

    %section#admin-content
      .container
        = yield

    = render 'shared/footer_revised'
