#!/usr/bin/env ruby
# frozen_string_literal: true

require "bundler/setup"

# Simple check: if CSS files exist, assume they're compiled
builds_dir = File.expand_path("../app/assets/builds", __dir__)
css_files = Dir.glob(File.join(builds_dir, "*.css"))

if css_files.empty?
  puts "Compiling assets before tests..."
  system("RAILS_ENV=test bundle exec rails assets:precompile 2>/dev/null")
end

# Pass all arguments to turbo_tests
exec "bundle", "exec", "turbo_tests", *ARGV
