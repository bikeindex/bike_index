default: &default
  adapter: postgresql
  # manually set db_pool, separate from threads, because sidekiq
  pool: <%= ENV.fetch("DB_POOL") { 20 } %>

development:
  primary:
    <<: *default
    database: bikeindex_development
  primary_replica:
    <<: *default
    database: bikeindex_development_replica
    replica: true

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  primary:
    <<: *default
    database: bikeindex_test<%= ENV["TEST_ENV_NUMBER"] %>
  primary_replica:
    <<: *default
    database: bikeindex_test_replica<%= ENV["TEST_ENV_NUMBER"] %>
    replica: true

production:
  primary:
    <<: *default
    host: "<%= ENV['SPECIFIED_POSTGRESQL_ADDRESS'] %>"
    database: "<%= ENV['SPECIFIED_POSTGRESQL_DATABASE'] %>"
    username: "<%= ENV['SPECIFIED_POSTGRESQL_USERNAME'] %>"
    password: "<%= ENV['SPECIFIED_POSTGRESQL_PASSWORD'] %>"

  primary_replica:
    <<: *default
    replica: true
    host: "<%= ENV['SPECIFIED_POSTGRESQL_REPLICA_ADDRESS'] %>"
    database: "<%= ENV['SPECIFIED_POSTGRESQL_DATABASE'] %>"
    username: "<%= ENV['SPECIFIED_POSTGRESQL_USERNAME'] %>"
    password: "<%= ENV['SPECIFIED_POSTGRESQL_PASSWORD'] %>"
